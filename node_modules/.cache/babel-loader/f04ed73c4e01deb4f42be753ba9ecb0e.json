{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\src\\\\view\\\\Dashbord\\\\Task\\\\BackSide\\\\BackSide.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector } from \"react-redux\"; // import { updateArraysAction } from \"../../../../state/actions/updateArraysAction\";\n\nimport { flexbox } from \"../../../../style/mixins\";\nimport * as c from \"../../../../style/colors\";\nimport fetchAPI from \"../../../../service/services\";\nimport { GiReturnArrow } from \"react-icons/gi\";\nimport _ from \"lodash\";\nimport { useDispatch } from \"react-redux\";\nimport { updateArraysAction } from \"../../../../state/actions/updateArraysAction\";\n\nconst BackSide = ({\n  title,\n  urgency,\n  cardIsFlipped,\n  setCardIsFlipped,\n  colorwayStyle,\n  status,\n  firstButtonText,\n  secondButtonText,\n  id\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        buttonsText = _useState2[0],\n        SetButtonsText = _useState2[1];\n\n  const tasksArrays = useSelector(state => state.updateArraysReducer);\n  const dispatch = useDispatch();\n  const todoArray = tasksArrays.todoArray;\n  const inProgressArray = tasksArrays.inProgressArray;\n  const completedTasksArray = tasksArrays.completedTasksArray;\n  const tasksCounter = tasksArrays.tasksCounter;\n  useEffect(() => {\n    selectButtonsText();\n  }, [status]); //--SERVER FUNCTIONS--//\n\n  const updatingArraysInDataBase = async () => {\n    const updatedArrays = {\n      todoArray,\n      inProgressArray,\n      completedTasksArray,\n      tasksCounter\n    }; // const putMethod = {\n    //   method: \"PUT\",\n    //   headers: {\n    //     \"Content-type\": \"application/json; charset=UTF-8\",\n    //     \"auth-token\": localStorage.getItem(\"token\")\n    //   },\n    //   body: JSON.stringify(updatedArrays) // We send data in JSON format\n    // };\n    //   await fetch(\n    //     `https://tracker-database.youngwebdevs.now.sh/dashboard/updatingarrays`,\n    //     putMethod\n    //   );\n    // };\n\n    const jsonUserData = await fetchAPI({\n      urlString: \"updateTasks\",\n      method: \"updateDB\",\n      body: updatedArrays\n    });\n  };\n\n  const selectButtonsText = () => {\n    switch (status) {\n      case \"To Do\":\n        SetButtonsText([\"Forward to In Progress\", \"Forward to Done\"]);\n        break;\n\n      case \"In Progress\":\n        SetButtonsText([\"Forward to Done\", \"Return to Todo\"]);\n        break;\n\n      case \"Done\":\n        SetButtonsText([\"Return to In Progress\", \"Return to Todo\"]);\n        break;\n    }\n  }; //-------------------------------------------------//\n\n\n  const handleFirstMove = () => {\n    switch (status) {\n      case \"To Do\":\n        selectChange(todoArray, inProgressArray, \"In Progress\");\n        updatingArraysInDataBase();\n        break;\n\n      case \"In Progress\":\n        selectChange(inProgressArray, completedTasksArray, \"Done\");\n        updatingArraysInDataBase();\n        break;\n\n      case \"Done\":\n        selectChange(completedTasksArray, inProgressArray, \"In Progress\");\n        updatingArraysInDataBase();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const handleSecondMove = () => {\n    switch (status) {\n      case \"To Do\":\n        selectChange(todoArray, completedTasksArray, \"Done\");\n        updatingArraysInDataBase();\n        break;\n\n      case \"In Progress\":\n        selectChange(inProgressArray, todoArray, \"To Do\");\n        updatingArraysInDataBase();\n        break;\n\n      case \"Done\":\n        selectChange(completedTasksArray, todoArray, \"To Do\");\n        updatingArraysInDataBase();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const handleDelete = () => {\n    switch (status) {\n      case \"To Do\":\n        selectChange(todoArray, null, null, true);\n        break;\n\n      case \"In Progress\":\n        selectChange(inProgressArray, null, null, true);\n        break;\n\n      case \"Done\":\n        selectChange(completedTasksArray, null, null, true);\n        break;\n\n      default:\n        break;\n    }\n  }; //------------------------------------------------------//\n\n\n  const selectChange = (arrayToRemoveFrom, arrayToAddInto, destination, deleteTask) => {\n    const selectedTask = _.remove(arrayToRemoveFrom, item => {\n      return item.id === id;\n    });\n\n    if (deleteTask === true) {\n      setCardIsFlipped(false);\n      dispatch(updateArraysAction(arrayToRemoveFrom));\n      updatingArraysInDataBase();\n      return;\n    }\n\n    const newStatusSelectedTask = _objectSpread({}, selectedTask[0], {\n      status: destination\n    });\n\n    arrayToAddInto.push(newStatusSelectedTask); // WARNING: because JS is flexable, this way will create duplicates rather than run over the current key:value pair.\n    // const updatedArrays = {\n    //   arrayToRemoveFrom,\n    //   arrayToAddInto\n    // };\n\n    const updatedArrays = {\n      arrayToRemoveFrom: arrayToRemoveFrom,\n      arrayToAddInto: arrayToAddInto\n    };\n    setCardIsFlipped(false);\n    dispatch(updateArraysAction(updatedArrays));\n  };\n\n  return React.createElement(BackSideBox, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(OptionsButtonBack, {\n    onClick: () => setCardIsFlipped(!cardIsFlipped),\n    colorwayStyle: colorwayStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(StyledArrowIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  })), React.createElement(HeaderArea, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(UrgencyIconsContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, React.createElement(UrgencyIconBox, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, urgency === \"regular\" && React.createElement(AlertICON, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }), urgency === \"high\" && React.createElement(FireSVG, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }))), React.createElement(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, title), searchIsOpen && React.createElement(StatusDisplay, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, `Currently in: ${status}`)), React.createElement(OtherActionsArea, {\n    colorwayStyle: colorwayStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(FirstMoveButton, {\n    onClick: () => {\n      handleFirstMove(status);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, buttonsText[0]), React.createElement(SecondMoveButton, {\n    onClick: () => {\n      handleSecondMove(status);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, buttonsText[1]), React.createElement(DeleteTaskButton, {\n    onClick: () => {\n      handleDelete(status);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"Delete Tracker\")));\n};\n\nexport default BackSide;\nconst BackSideBox = styled.div`\n  position: absolute;\n  backface-visibility: hidden;\n\n  transform: rotateY(180deg);\n  perspective: 900px;\n\n  height: 100%;\n  width: 100%;\n`;\nconst StyledArrowIcon = styled(GiReturnArrow)`\n  transition: 2s infinite;\n\n  :hover {\n    filter: drop-shadow(0 0 5px gray);\n  }\n`;\nconst OptionsButton = styled.div`\n  ${flexbox()};\n  position: absolute;\n  z-index: 2;\n  right: 0;\n  top: 0;\n  height: 25%;\n  width: 50px;\n  font-size: 1.4rem;\n  transform: rotateY(180deg) rotateX(180deg);\n  border-radius: 10px;\n  background: white;\n  transition: 0.3s ease-in-out;\n\n  :hover {\n    cursor: pointer;\n  }\n`;\nconst OptionsButtonBack = styled(OptionsButton)`\n  height: 25%;\n  transform: rotateY(0) rotateX(0);\n`;\nconst HeaderArea = styled.div`\n  ${flexbox({\n  jc: \"flex-start\"\n})};\n  flex-basis: 30%;\n  height: 30%;\n  width: 100%;\n  border-radius: 10px;\n  position: relative;\n`;\nconst UrgencyIconsContainer = styled.div`\n  height: 100%;\n  width: 3%;\n  flex-basis: 3%;\n  position: relative;\n`;\nconst UrgencyIconBox = styled.div`\n  position: absolute;\n  height: 32px;\n  width: 32px;\n  left: -16px;\n  top: -16px;\n`;\nconst AlertICON = styled(AlertSVG)`\n  fill: firebrick;\n`;\nconst Title = styled.div`\n  ${flexbox({\n  jc: \"flex-start\"\n})}\n  height: 100%;\n  width: calc(97% -50px);\n  flex-basis: calc(97% -50px);\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: ${c.darkText};\n\n  overflow-x: auto;\n`;\nconst StatusDisplay = styled.div`\n  position: absolute;\n  top: 5px;\n  left: 0;\n  width: 100%;\n  color: ${c.darkText};\n  height: 10px;\n  font-size: 0.7rem;\n  padding-left: 15px;\n`; // const Title = styled.div`\n//   ${flexbox({ jc: \"flex-start\" })}\n//   height: 25%;\n//   width: calc(97% -50px);\n//   flex-basis: calc(97% -50px);\n//   font-size: 1.5rem;\n//   font-weight: bold;\n//   color: ${c.darkText};\n//   overflow-x: auto;\n// `;\n\nconst OtherActionsArea = styled.div`\n  ${flexbox({\n  dir: \"column\"\n})};\n  flex-basis: 75%;\n  height: 75%;\n  width: 100%;\n  background: ${({\n  colorwayStyle\n}) => colorwayStyle};\n  border-radius: 10px 0 10px 10px;\n`;\nconst FirstMoveButton = styled.div`\n  ${flexbox()};\n  position: relative;\n  height: 33.333%;\n  flex-basis: 33.333%;\n  width: 100%;\n  border-radius: 10px 0 0 0;\n  font-weight: bold;\n  font-size: 1.2rem;\n  transition: 0.2s ease-out;\n  color: white;\n\n  :hover {\n    cursor: pointer;\n    text-shadow: 0 0 5px white;\n  }\n`;\nconst SecondMoveButton = styled(FirstMoveButton)``;\nconst DeleteTaskButton = styled(FirstMoveButton)`\n  border-radius: 0 0 10px 10px;\n  color: ${c.shyRed};\n\n  :hover {\n    text-shadow: 0 0 5px red;\n  }\n`;","map":{"version":3,"sources":["C:/Users/orenk/Desktop/Netcraft/projects/tracker/tracker/src/view/Dashbord/Task/BackSide/BackSide.jsx"],"names":["React","useState","useEffect","styled","useSelector","flexbox","c","fetchAPI","GiReturnArrow","_","useDispatch","updateArraysAction","BackSide","title","urgency","cardIsFlipped","setCardIsFlipped","colorwayStyle","status","firstButtonText","secondButtonText","id","buttonsText","SetButtonsText","tasksArrays","state","updateArraysReducer","dispatch","todoArray","inProgressArray","completedTasksArray","tasksCounter","selectButtonsText","updatingArraysInDataBase","updatedArrays","jsonUserData","urlString","method","body","handleFirstMove","selectChange","handleSecondMove","handleDelete","arrayToRemoveFrom","arrayToAddInto","destination","deleteTask","selectedTask","remove","item","newStatusSelectedTask","push","searchIsOpen","BackSideBox","div","StyledArrowIcon","OptionsButton","OptionsButtonBack","HeaderArea","jc","UrgencyIconsContainer","UrgencyIconBox","AlertICON","AlertSVG","Title","darkText","StatusDisplay","OtherActionsArea","dir","FirstMoveButton","SecondMoveButton","DeleteTaskButton","shyRed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// import { updateArraysAction } from \"../../../../state/actions/updateArraysAction\";\r\n\r\nimport { flexbox } from \"../../../../style/mixins\";\r\nimport * as c from \"../../../../style/colors\";\r\nimport fetchAPI from \"../../../../service/services\";\r\n\r\nimport { GiReturnArrow } from \"react-icons/gi\";\r\nimport _ from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { updateArraysAction } from \"../../../../state/actions/updateArraysAction\";\r\n\r\nconst BackSide = ({\r\n  title,\r\n  urgency,\r\n  cardIsFlipped,\r\n  setCardIsFlipped,\r\n  colorwayStyle,\r\n  status,\r\n  firstButtonText,\r\n  secondButtonText,\r\n  id\r\n}) => {\r\n  const [buttonsText, SetButtonsText] = useState([]);\r\n  const tasksArrays = useSelector(state => state.updateArraysReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const todoArray = tasksArrays.todoArray;\r\n  const inProgressArray = tasksArrays.inProgressArray;\r\n  const completedTasksArray = tasksArrays.completedTasksArray;\r\n  const tasksCounter = tasksArrays.tasksCounter;\r\n\r\n  useEffect(() => {\r\n    selectButtonsText();\r\n  }, [status]);\r\n\r\n  //--SERVER FUNCTIONS--//\r\n\r\n  const updatingArraysInDataBase = async () => {\r\n    const updatedArrays = {\r\n      todoArray,\r\n      inProgressArray,\r\n      completedTasksArray,\r\n      tasksCounter\r\n    };\r\n\r\n    // const putMethod = {\r\n    //   method: \"PUT\",\r\n    //   headers: {\r\n    //     \"Content-type\": \"application/json; charset=UTF-8\",\r\n    //     \"auth-token\": localStorage.getItem(\"token\")\r\n    //   },\r\n    //   body: JSON.stringify(updatedArrays) // We send data in JSON format\r\n    // };\r\n\r\n    //   await fetch(\r\n    //     `https://tracker-database.youngwebdevs.now.sh/dashboard/updatingarrays`,\r\n    //     putMethod\r\n    //   );\r\n    // };\r\n    const jsonUserData = await fetchAPI({\r\n      urlString: \"updateTasks\",\r\n      method: \"updateDB\",\r\n      body: updatedArrays\r\n    });\r\n  };\r\n\r\n  const selectButtonsText = () => {\r\n    switch (status) {\r\n      case \"To Do\":\r\n        SetButtonsText([\"Forward to In Progress\", \"Forward to Done\"]);\r\n        break;\r\n      case \"In Progress\":\r\n        SetButtonsText([\"Forward to Done\", \"Return to Todo\"]);\r\n        break;\r\n      case \"Done\":\r\n        SetButtonsText([\"Return to In Progress\", \"Return to Todo\"]);\r\n        break;\r\n    }\r\n  };\r\n\r\n  //-------------------------------------------------//\r\n\r\n  const handleFirstMove = () => {\r\n    switch (status) {\r\n      case \"To Do\":\r\n        selectChange(todoArray, inProgressArray, \"In Progress\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      case \"In Progress\":\r\n        selectChange(inProgressArray, completedTasksArray, \"Done\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      case \"Done\":\r\n        selectChange(completedTasksArray, inProgressArray, \"In Progress\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleSecondMove = () => {\r\n    switch (status) {\r\n      case \"To Do\":\r\n        selectChange(todoArray, completedTasksArray, \"Done\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      case \"In Progress\":\r\n        selectChange(inProgressArray, todoArray, \"To Do\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      case \"Done\":\r\n        selectChange(completedTasksArray, todoArray, \"To Do\");\r\n        updatingArraysInDataBase();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    switch (status) {\r\n      case \"To Do\":\r\n        selectChange(todoArray, null, null, true);\r\n        break;\r\n      case \"In Progress\":\r\n        selectChange(inProgressArray, null, null, true);\r\n        break;\r\n      case \"Done\":\r\n        selectChange(completedTasksArray, null, null, true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  //------------------------------------------------------//\r\n\r\n  const selectChange = (\r\n    arrayToRemoveFrom,\r\n    arrayToAddInto,\r\n    destination,\r\n    deleteTask\r\n  ) => {\r\n    const selectedTask = _.remove(arrayToRemoveFrom, item => {\r\n      return item.id === id;\r\n    });\r\n\r\n    if (deleteTask === true) {\r\n      setCardIsFlipped(false);\r\n      dispatch(updateArraysAction(arrayToRemoveFrom));\r\n      updatingArraysInDataBase();\r\n      return;\r\n    }\r\n\r\n    const newStatusSelectedTask = {\r\n      ...selectedTask[0],\r\n      status: destination\r\n    };\r\n    arrayToAddInto.push(newStatusSelectedTask);\r\n\r\n    // WARNING: because JS is flexable, this way will create duplicates rather than run over the current key:value pair.\r\n    // const updatedArrays = {\r\n    //   arrayToRemoveFrom,\r\n    //   arrayToAddInto\r\n    // };\r\n\r\n    const updatedArrays = {\r\n      arrayToRemoveFrom: arrayToRemoveFrom,\r\n      arrayToAddInto: arrayToAddInto\r\n    };\r\n\r\n    setCardIsFlipped(false);\r\n    dispatch(updateArraysAction(updatedArrays));\r\n  };\r\n\r\n  return (\r\n    <BackSideBox>\r\n      <OptionsButtonBack\r\n        onClick={() => setCardIsFlipped(!cardIsFlipped)}\r\n        colorwayStyle={colorwayStyle}\r\n      >\r\n        <StyledArrowIcon />\r\n      </OptionsButtonBack>\r\n\r\n      {/* <Title>{title}</Title> */}\r\n      <HeaderArea>\r\n        <UrgencyIconsContainer>\r\n          <UrgencyIconBox>\r\n            {urgency === \"regular\" && <AlertICON />}\r\n            {urgency === \"high\" && <FireSVG />}\r\n          </UrgencyIconBox>\r\n        </UrgencyIconsContainer>\r\n        <Title>{title}</Title>\r\n        {searchIsOpen && (\r\n          <StatusDisplay>{`Currently in: ${status}`}</StatusDisplay>\r\n        )}\r\n      </HeaderArea>\r\n      <OtherActionsArea colorwayStyle={colorwayStyle}>\r\n        <FirstMoveButton\r\n          onClick={() => {\r\n            handleFirstMove(status);\r\n          }}\r\n        >\r\n          {buttonsText[0]}\r\n        </FirstMoveButton>\r\n        <SecondMoveButton\r\n          onClick={() => {\r\n            handleSecondMove(status);\r\n          }}\r\n        >\r\n          {buttonsText[1]}\r\n        </SecondMoveButton>\r\n        <DeleteTaskButton\r\n          onClick={() => {\r\n            handleDelete(status);\r\n          }}\r\n        >\r\n          Delete Tracker\r\n        </DeleteTaskButton>\r\n      </OtherActionsArea>\r\n    </BackSideBox>\r\n  );\r\n};\r\n\r\nexport default BackSide;\r\n\r\nconst BackSideBox = styled.div`\r\n  position: absolute;\r\n  backface-visibility: hidden;\r\n\r\n  transform: rotateY(180deg);\r\n  perspective: 900px;\r\n\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledArrowIcon = styled(GiReturnArrow)`\r\n  transition: 2s infinite;\r\n\r\n  :hover {\r\n    filter: drop-shadow(0 0 5px gray);\r\n  }\r\n`;\r\n\r\nconst OptionsButton = styled.div`\r\n  ${flexbox()};\r\n  position: absolute;\r\n  z-index: 2;\r\n  right: 0;\r\n  top: 0;\r\n  height: 25%;\r\n  width: 50px;\r\n  font-size: 1.4rem;\r\n  transform: rotateY(180deg) rotateX(180deg);\r\n  border-radius: 10px;\r\n  background: white;\r\n  transition: 0.3s ease-in-out;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst OptionsButtonBack = styled(OptionsButton)`\r\n  height: 25%;\r\n  transform: rotateY(0) rotateX(0);\r\n`;\r\n\r\nconst HeaderArea = styled.div`\r\n  ${flexbox({ jc: \"flex-start\" })};\r\n  flex-basis: 30%;\r\n  height: 30%;\r\n  width: 100%;\r\n  border-radius: 10px;\r\n  position: relative;\r\n`;\r\n\r\nconst UrgencyIconsContainer = styled.div`\r\n  height: 100%;\r\n  width: 3%;\r\n  flex-basis: 3%;\r\n  position: relative;\r\n`;\r\n\r\nconst UrgencyIconBox = styled.div`\r\n  position: absolute;\r\n  height: 32px;\r\n  width: 32px;\r\n  left: -16px;\r\n  top: -16px;\r\n`;\r\n\r\nconst AlertICON = styled(AlertSVG)`\r\n  fill: firebrick;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  ${flexbox({ jc: \"flex-start\" })}\r\n  height: 100%;\r\n  width: calc(97% -50px);\r\n  flex-basis: calc(97% -50px);\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  color: ${c.darkText};\r\n\r\n  overflow-x: auto;\r\n`;\r\n\r\nconst StatusDisplay = styled.div`\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 0;\r\n  width: 100%;\r\n  color: ${c.darkText};\r\n  height: 10px;\r\n  font-size: 0.7rem;\r\n  padding-left: 15px;\r\n`;\r\n\r\n// const Title = styled.div`\r\n//   ${flexbox({ jc: \"flex-start\" })}\r\n//   height: 25%;\r\n//   width: calc(97% -50px);\r\n//   flex-basis: calc(97% -50px);\r\n//   font-size: 1.5rem;\r\n//   font-weight: bold;\r\n//   color: ${c.darkText};\r\n\r\n//   overflow-x: auto;\r\n// `;\r\n\r\nconst OtherActionsArea = styled.div`\r\n  ${flexbox({ dir: \"column\" })};\r\n  flex-basis: 75%;\r\n  height: 75%;\r\n  width: 100%;\r\n  background: ${({ colorwayStyle }) => colorwayStyle};\r\n  border-radius: 10px 0 10px 10px;\r\n`;\r\n\r\nconst FirstMoveButton = styled.div`\r\n  ${flexbox()};\r\n  position: relative;\r\n  height: 33.333%;\r\n  flex-basis: 33.333%;\r\n  width: 100%;\r\n  border-radius: 10px 0 0 0;\r\n  font-weight: bold;\r\n  font-size: 1.2rem;\r\n  transition: 0.2s ease-out;\r\n  color: white;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    text-shadow: 0 0 5px white;\r\n  }\r\n`;\r\n\r\nconst SecondMoveButton = styled(FirstMoveButton)``;\r\n\r\nconst DeleteTaskButton = styled(FirstMoveButton)`\r\n  border-radius: 0 0 10px 10px;\r\n  color: ${c.shyRed};\r\n\r\n  :hover {\r\n    text-shadow: 0 0 5px red;\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _taggedTemplateLiteral from\"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\node_modules\\\\@babel\\\\runtime/regenerator\";function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n  \",\";\\n  height: 100%;\\n  width: 100%;\\n  text-decoration: none;\\n  color: inherit;\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  \",\"\\n\\n  background: \",\";\\n  color: \",\";\\n  &:hover,\\n  &:focus {\\n    opacity: 0.9;\\n    cursor: pointer;\\n    background: \",\";\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 10px;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  box-shadow: \",\";\\n  background: \",\";\\n  color: \",\";\\n  width: 100%;\\n  height: 15%;\\n  border-radius: 5px;\\n  border: none;\\n  padding-left: 10px;\\n  font-size: 0.8rem;\\n\\n  opacity: 0.7;\\n  transition: 0.3s ease-out;\\n\\n  outline: none;\\n\\n  &:hover,\\n  &:focus {\\n    opacity: 1;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  \",\";\\n\\n  width: 90%;\\n  height: 100%;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  \",\";\\n  \",\";\\n  flex-basis: 65%;\\n  width: 80%;\\n\\n  background: \",\";\\n  padding: 20px;\\n\\n  max-height: 375px;\\n  max-width: 400px;\\n\\n  font-family: \\\"Montserrat\\\", sans-serif;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  flex-basis: 10%;\\n  font-size: 4rem;\\n  font-family: \\\"Titillium Web\\\", sans-serif;\\n  color: \",\";\\n  span {\\n    color: red;\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-evenly;\\n  align-items: center;\\n  flex-direction: column;\\n  color: \",\";\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from\"react\";import styled from\"styled-components\";import{flexbox,borderShadowsRadius,buttonStyle}from\"../../style/mixins\";import{useDispatch,useSelector}from\"react-redux\";import{Redirect,Link}from\"react-router-dom\";import*as c from\"../../style/colors\";import fetchAPI from\"../../service/services\";import{getUserAction}from\"../../state/actions/getUserAction\";import{isLoggedAction}from\"../../state/actions/isLoggedAction\";var Login=function Login(){var isLogged=useSelector(function(state){return state.isLoggedReducer;});var dispatch=useDispatch();var LoggedUserToken=localStorage.getItem(\"token\");console.log(\"LoggedUserToken\",LoggedUserToken);if(LoggedUserToken){// const getMethod = {\n//   method: \"GET\",\n//   headers: {\n//     \"Content-type\": \"application/json; charset=UTF-8\",\n//     \"auth-token\": localStorage.getItem(\"token\")\n//   }\n// };\nvar fetchLoggedUser=function _callee(){var jsonUserData;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetchAPI({urlString:\"logWithToken\",method:\"getByToken\"}));case 2:jsonUserData=_context.sent;// localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\ndispatch(getUserAction(jsonUserData));dispatch(isLoggedAction(jsonUserData));case 5:case\"end\":return _context.stop();}}});}();}var sendForm=function sendForm(e){var userName,userPassword,jsonUserData;return _regeneratorRuntime.async(function sendForm$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();userName=e.target[0].value;userPassword=e.target[1].value;_context2.prev=3;_context2.next=6;return _regeneratorRuntime.awrap(fetchAPI({urlString:\"logWithInput\",method:\"getByInput\",userName:userName,userPassword:userPassword}));case 6:jsonUserData=_context2.sent;// dispatch({ type: \"IMPORTUSER\", payload: jsonUserData });\ndispatch(getUserAction(jsonUserData));dispatch(isLoggedAction(jsonUserData));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);alert(\"Username or password is incorrect. make sure both user account and password are valid\");case 14:case\"end\":return _context2.stop();}}},null,null,[[3,11]]);};var loginAsGuest=function loginAsGuest(e){var jsonUserData;return _regeneratorRuntime.async(function loginAsGuest$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.next=3;return _regeneratorRuntime.awrap(fetchAPI({urlString:\"logWithInput\",method:\"getByInput\",userName:\"Global\",userPassword:1234}));case 3:jsonUserData=_context3.sent;dispatch(getUserAction(jsonUserData));dispatch(isLoggedAction(jsonUserData));case 6:case\"end\":return _context3.stop();}}});};return React.createElement(Wrapper,null,isLogged===true&&React.createElement(Redirect,{push:true,to:\"/dashboard\"}),React.createElement(Header,null,\"Dead\",React.createElement(\"span\",null,\"l\"),\"ine\"),React.createElement(Container,null,React.createElement(FormBox,{onSubmit:sendForm},React.createElement(EmailInput,{type:\"text\",minLength:\"2\",placeholder:\"User Name...\"}),React.createElement(PasswordInput,{type:\"password\",minLength:\"4\",placeholder:\"Password...\"}),React.createElement(LoginButton,{type:\"submit\"},\"Log In\"),React.createElement(SignUpButton,null,React.createElement(StyledLink,{to:\"/signup\"},\"Sign Up\")),React.createElement(GuestButton,{onClick:loginAsGuest},\"Log as Global Guest\"))));};export default Login;var Wrapper=styled.div(_templateObject(),c.darkText);var Header=styled.div(_templateObject2(),c.darkBlueText);var Container=styled.div(_templateObject3(),flexbox(),borderShadowsRadius,c.bgShyBlue);var FormBox=styled.form(_templateObject4(),flexbox({dir:\"column\",jc:\"space-around\"}));var EmailInput=styled.input(_templateObject5(),c.inputShadows,c.inputShyBlue,c.darkBlueText);var PasswordInput=styled(EmailInput)(_templateObject6());var LoginButton=styled.button(_templateObject7(),buttonStyle,c.elmShyBlue,c.darkBlueText,c.elmLightBlue);var SignUpButton=styled(LoginButton)(_templateObject8());var GuestButton=styled(LoginButton)(_templateObject9());var StyledLink=styled(Link)(_templateObject10(),flexbox());","map":{"version":3,"sources":["C:/Users/orenk/Desktop/Netcraft/projects/tracker/tracker/src/view/Login/Login.jsx"],"names":["React","styled","flexbox","borderShadowsRadius","buttonStyle","useDispatch","useSelector","Redirect","Link","c","fetchAPI","getUserAction","isLoggedAction","Login","isLogged","state","isLoggedReducer","dispatch","LoggedUserToken","localStorage","getItem","console","log","fetchLoggedUser","urlString","method","jsonUserData","sendForm","e","preventDefault","userName","target","value","userPassword","alert","loginAsGuest","Wrapper","div","darkText","Header","darkBlueText","Container","bgShyBlue","FormBox","form","dir","jc","EmailInput","input","inputShadows","inputShyBlue","PasswordInput","LoginButton","button","elmShyBlue","elmLightBlue","SignUpButton","GuestButton","StyledLink"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { flexbox, borderShadowsRadius, buttonStyle } from \"../../style/mixins\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport * as c from \"../../style/colors\";\r\nimport fetchAPI from \"../../service/services\";\r\n\r\nimport { getUserAction } from \"../../state/actions/getUserAction\";\r\nimport { isLoggedAction } from \"../../state/actions/isLoggedAction\";\r\n\r\nconst Login = () => {\r\n  const isLogged = useSelector(state => state.isLoggedReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const LoggedUserToken = localStorage.getItem(\"token\");\r\n  console.log(\"LoggedUserToken\", LoggedUserToken);\r\n\r\n  if (LoggedUserToken) {\r\n    // const getMethod = {\r\n    //   method: \"GET\",\r\n    //   headers: {\r\n    //     \"Content-type\": \"application/json; charset=UTF-8\",\r\n    //     \"auth-token\": localStorage.getItem(\"token\")\r\n    //   }\r\n    // };\r\n\r\n    const fetchLoggedUser = (async () => {\r\n      // const userData = await fetch(\r\n      //   `https://tracker-database.youngwebdevs.now.sh/login/loggeduser/`,\r\n      //   getMethod\r\n      // );\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      // const jsonUserData = await userData.json();\r\n\r\n      // const jsonUserData = fetchAPI({\r\n      //   urlString: \"logWithToken\",\r\n      //   method: \"getToken\"\r\n      // });\r\n\r\n      const jsonUserData = await fetchAPI({\r\n        urlString: \"logWithToken\",\r\n        method: \"getByToken\"\r\n      });\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      dispatch(getUserAction(jsonUserData));\r\n      dispatch(isLoggedAction(jsonUserData));\r\n    })();\r\n  }\r\n\r\n  const sendForm = async e => {\r\n    e.preventDefault();\r\n    const userName = e.target[0].value;\r\n    const userPassword = e.target[1].value;\r\n\r\n    try {\r\n      // const userData = await fetch(\r\n      //   `https://tracker-database.youngwebdevs.now.sh/login/userfromdb/?userName=${userName}&password=${userPassword}`\r\n      // );\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      // const jsonUserData = await userData.json();\r\n      const jsonUserData = await fetchAPI({\r\n        urlString: \"logWithInput\",\r\n        method: \"getByInput\",\r\n        userName,\r\n        userPassword\r\n      });\r\n\r\n      // dispatch({ type: \"IMPORTUSER\", payload: jsonUserData });\r\n      dispatch(getUserAction(jsonUserData));\r\n      dispatch(isLoggedAction(jsonUserData));\r\n    } catch (error) {\r\n      alert(\r\n        \"Username or password is incorrect. make sure both user account and password are valid\"\r\n      );\r\n    }\r\n  };\r\n  const loginAsGuest = async e => {\r\n    e.preventDefault();\r\n    const jsonUserData = await fetchAPI({\r\n      urlString: \"logWithInput\",\r\n      method: \"getByInput\",\r\n      userName: \"Global\",\r\n      userPassword: 1234\r\n    });\r\n    dispatch(getUserAction(jsonUserData));\r\n    dispatch(isLoggedAction(jsonUserData));\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      {isLogged === true && <Redirect push to=\"/dashboard\" />}\r\n      <Header>\r\n        Dead<span>l</span>ine\r\n      </Header>\r\n      <Container>\r\n        <FormBox onSubmit={sendForm}>\r\n          <EmailInput type=\"text\" minLength=\"2\" placeholder=\"User Name...\" />\r\n          <PasswordInput\r\n            type=\"password\"\r\n            minLength=\"4\"\r\n            placeholder=\"Password...\"\r\n          />\r\n          <LoginButton type=\"submit\">Log In</LoginButton>\r\n          <SignUpButton>\r\n            <StyledLink to=\"/signup\">Sign Up</StyledLink>\r\n          </SignUpButton>\r\n          <GuestButton onClick={loginAsGuest}>Log as Global Guest</GuestButton>\r\n        </FormBox>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  color: ${c.darkText};\r\n`;\r\n\r\nconst Header = styled.div`\r\n  flex-basis: 10%;\r\n  font-size: 4rem;\r\n  font-family: \"Titillium Web\", sans-serif;\r\n  color: ${c.darkBlueText};\r\n  span {\r\n    color: red;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  ${flexbox()};\r\n  ${borderShadowsRadius};\r\n  flex-basis: 65%;\r\n  width: 80%;\r\n\r\n  background: ${c.bgShyBlue};\r\n  padding: 20px;\r\n\r\n  max-height: 375px;\r\n  max-width: 400px;\r\n\r\n  font-family: \"Montserrat\", sans-serif;\r\n`;\r\n\r\nconst FormBox = styled.form`\r\n  ${flexbox({ dir: \"column\", jc: \"space-around\" })};\r\n\r\n  width: 90%;\r\n  height: 100%;\r\n`;\r\n\r\nconst EmailInput = styled.input`\r\n  box-shadow: ${c.inputShadows};\r\n  background: ${c.inputShyBlue};\r\n  color: ${c.darkBlueText};\r\n  width: 100%;\r\n  height: 15%;\r\n  border-radius: 5px;\r\n  border: none;\r\n  padding-left: 10px;\r\n  font-size: 0.8rem;\r\n\r\n  opacity: 0.7;\r\n  transition: 0.3s ease-out;\r\n\r\n  outline: none;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    opacity: 1;\r\n  }\r\n`;\r\nconst PasswordInput = styled(EmailInput)`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst LoginButton = styled.button`\r\n  ${buttonStyle}\r\n\r\n  background: ${c.elmShyBlue};\r\n  color: ${c.darkBlueText};\r\n  &:hover,\r\n  &:focus {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    background: ${c.elmLightBlue};\r\n  }\r\n`;\r\n\r\nconst SignUpButton = styled(LoginButton)``;\r\nconst GuestButton = styled(LoginButton)``;\r\n\r\nconst StyledLink = styled(Link)`\r\n  ${flexbox()};\r\n  height: 100%;\r\n  width: 100%;\r\n  text-decoration: none;\r\n  color: inherit;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}
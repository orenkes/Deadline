{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\orenk\\\\Desktop\\\\Netcraft\\\\projects\\\\tracker\\\\tracker\\\\src\\\\view\\\\Login\\\\Login.jsx\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { flexbox, borderShadowsRadius, buttonStyle } from \"../../style/mixins\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport * as c from \"../../style/colors\";\nimport fetchAPI from \"../../service/services\";\nimport { getUserAction } from \"../../state/actions/getUserAction\";\nimport { isLoggedAction } from \"../../state/actions/isLoggedAction\";\n\nconst Login = () => {\n  const isLogged = useSelector(state => state.isLoggedReducer);\n  const dispatch = useDispatch();\n  const LoggedUserToken = localStorage.getItem(\"token\");\n  console.log(\"LoggedUserToken\", LoggedUserToken);\n\n  if (LoggedUserToken) {\n    // const getMethod = {\n    //   method: \"GET\",\n    //   headers: {\n    //     \"Content-type\": \"application/json; charset=UTF-8\",\n    //     \"auth-token\": localStorage.getItem(\"token\")\n    //   }\n    // };\n    const fetchLoggedUser = (async () => {\n      // const userData = await fetch(\n      //   `https://tracker-database.youngwebdevs.now.sh/login/loggeduser/`,\n      //   getMethod\n      // );\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\n      // const jsonUserData = await userData.json();\n      // const jsonUserData = fetchAPI({\n      //   urlString: \"logWithToken\",\n      //   method: \"getToken\"\n      // });\n      const jsonUserData = await fetchAPI({\n        urlString: \"logWithToken\",\n        method: \"getByToken\"\n      }); // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\n\n      dispatch(getUserAction(jsonUserData));\n      dispatch(isLoggedAction(jsonUserData));\n    })();\n  }\n\n  const sendForm = async e => {\n    e.preventDefault();\n    const userName = e.target[0].value;\n    const userPassword = e.target[1].value;\n\n    try {\n      // const userData = await fetch(\n      //   `https://tracker-database.youngwebdevs.now.sh/login/userfromdb/?userName=${userName}&password=${userPassword}`\n      // );\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\n      // const jsonUserData = await userData.json();\n      const jsonUserData = await fetchAPI({\n        urlString: \"logWithInput\",\n        method: \"getByInput\",\n        userName,\n        userPassword\n      }); // dispatch({ type: \"IMPORTUSER\", payload: jsonUserData });\n\n      dispatch(getUserAction(jsonUserData));\n      dispatch(isLoggedAction(jsonUserData));\n    } catch (error) {\n      alert(\"username or password is incorrect.make sure both user account and password are valid\");\n    }\n  };\n\n  const loginAsGuest = async e => {\n    e.preventDefault();\n    const jsonUserData = await fetchAPI({\n      urlString: \"logWithInput\",\n      method: \"getByInput\",\n      userName: \"Global\",\n      userPassword: 1234\n    });\n    dispatch(getUserAction(jsonUserData));\n    dispatch(isLoggedAction(jsonUserData));\n  };\n\n  return React.createElement(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, isLogged === true && React.createElement(Redirect, {\n    push: true,\n    to: \"/dashboard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Dead\", React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"l\"), \"ine\"), React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(FormBox, {\n    onSubmit: sendForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(EmailInput, {\n    type: \"text\",\n    minLength: \"2\",\n    placeholder: \"User Name...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(PasswordInput, {\n    type: \"password\",\n    minLength: \"4\",\n    placeholder: \"Password...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(LoginButton, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Log In\"), React.createElement(SignUpButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(StyledLink, {\n    to: \"/signup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Sign Up\")), React.createElement(GuestButton, {\n    onClick: loginAsGuest,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Log as Global Guest\"))));\n};\n\nexport default Login;\nconst Wrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: column;\n  color: ${c.darkText};\n`;\nconst Header = styled.div`\n  flex-basis: 10%;\n  font-size: 4rem;\n  font-family: \"Titillium Web\", sans-serif;\n  color: ${c.darkBlueText};\n  span {\n    color: red;\n  }\n`;\nconst Container = styled.div`\n  ${flexbox()};\n  ${borderShadowsRadius};\n  flex-basis: 65%;\n  width: 80%;\n\n  background: ${c.bgShyBlue};\n  padding: 20px;\n\n  max-height: 375px;\n  max-width: 400px;\n\n  font-family: \"Montserrat\", sans-serif;\n`;\nconst FormBox = styled.form`\n  ${flexbox({\n  dir: \"column\",\n  jc: \"space-around\"\n})};\n\n  width: 90%;\n  height: 100%;\n`;\nconst EmailInput = styled.input`\n  box-shadow: ${c.inputShadows};\n  background: ${c.inputShyBlue};\n  color: ${c.darkBlueText};\n  width: 100%;\n  height: 15%;\n  border-radius: 5px;\n  border: none;\n  padding-left: 10px;\n  font-size: 0.8rem;\n\n  opacity: 0.7;\n  transition: 0.3s ease-out;\n\n  outline: none;\n\n  &:hover,\n  &:focus {\n    opacity: 1;\n  }\n`;\nconst PasswordInput = styled(EmailInput)`\n  margin-bottom: 10px;\n`;\nconst LoginButton = styled.button`\n  ${buttonStyle}\n\n  background: ${c.elmShyBlue};\n  color: ${c.darkBlueText};\n  &:hover,\n  &:focus {\n    opacity: 0.9;\n    cursor: pointer;\n    background: ${c.elmLightBlue};\n  }\n`;\nconst SignUpButton = styled(LoginButton)``;\nconst GuestButton = styled(LoginButton)``;\nconst StyledLink = styled(Link)`\n  ${flexbox()};\n  height: 100%;\n  width: 100%;\n  text-decoration: none;\n  color: inherit;\n`;","map":{"version":3,"sources":["C:/Users/orenk/Desktop/Netcraft/projects/tracker/tracker/src/view/Login/Login.jsx"],"names":["React","styled","flexbox","borderShadowsRadius","buttonStyle","useDispatch","useSelector","Redirect","Link","c","fetchAPI","getUserAction","isLoggedAction","Login","isLogged","state","isLoggedReducer","dispatch","LoggedUserToken","localStorage","getItem","console","log","fetchLoggedUser","jsonUserData","urlString","method","sendForm","e","preventDefault","userName","target","value","userPassword","error","alert","loginAsGuest","Wrapper","div","darkText","Header","darkBlueText","Container","bgShyBlue","FormBox","form","dir","jc","EmailInput","input","inputShadows","inputShyBlue","PasswordInput","LoginButton","button","elmShyBlue","elmLightBlue","SignUpButton","GuestButton","StyledLink"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { flexbox, borderShadowsRadius, buttonStyle } from \"../../style/mixins\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport * as c from \"../../style/colors\";\r\nimport fetchAPI from \"../../service/services\";\r\n\r\nimport { getUserAction } from \"../../state/actions/getUserAction\";\r\nimport { isLoggedAction } from \"../../state/actions/isLoggedAction\";\r\n\r\nconst Login = () => {\r\n  const isLogged = useSelector(state => state.isLoggedReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const LoggedUserToken = localStorage.getItem(\"token\");\r\n  console.log(\"LoggedUserToken\", LoggedUserToken);\r\n\r\n  if (LoggedUserToken) {\r\n    // const getMethod = {\r\n    //   method: \"GET\",\r\n    //   headers: {\r\n    //     \"Content-type\": \"application/json; charset=UTF-8\",\r\n    //     \"auth-token\": localStorage.getItem(\"token\")\r\n    //   }\r\n    // };\r\n\r\n    const fetchLoggedUser = (async () => {\r\n      // const userData = await fetch(\r\n      //   `https://tracker-database.youngwebdevs.now.sh/login/loggeduser/`,\r\n      //   getMethod\r\n      // );\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      // const jsonUserData = await userData.json();\r\n\r\n      // const jsonUserData = fetchAPI({\r\n      //   urlString: \"logWithToken\",\r\n      //   method: \"getToken\"\r\n      // });\r\n\r\n      const jsonUserData = await fetchAPI({\r\n        urlString: \"logWithToken\",\r\n        method: \"getByToken\"\r\n      });\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      dispatch(getUserAction(jsonUserData));\r\n      dispatch(isLoggedAction(jsonUserData));\r\n    })();\r\n  }\r\n\r\n  const sendForm = async e => {\r\n    e.preventDefault();\r\n    const userName = e.target[0].value;\r\n    const userPassword = e.target[1].value;\r\n\r\n    try {\r\n      // const userData = await fetch(\r\n      //   `https://tracker-database.youngwebdevs.now.sh/login/userfromdb/?userName=${userName}&password=${userPassword}`\r\n      // );\r\n      // localStorage.setItem(\"token\", userData.headers.get(\"auth-token\"));\r\n      // const jsonUserData = await userData.json();\r\n      const jsonUserData = await fetchAPI({\r\n        urlString: \"logWithInput\",\r\n        method: \"getByInput\",\r\n        userName,\r\n        userPassword\r\n      });\r\n\r\n      // dispatch({ type: \"IMPORTUSER\", payload: jsonUserData });\r\n      dispatch(getUserAction(jsonUserData));\r\n      dispatch(isLoggedAction(jsonUserData));\r\n    } catch (error) {\r\n      alert(\r\n        \"username or password is incorrect.make sure both user account and password are valid\"\r\n      );\r\n    }\r\n  };\r\n  const loginAsGuest = async e => {\r\n    e.preventDefault();\r\n    const jsonUserData = await fetchAPI({\r\n      urlString: \"logWithInput\",\r\n      method: \"getByInput\",\r\n      userName: \"Global\",\r\n      userPassword: 1234\r\n    });\r\n    dispatch(getUserAction(jsonUserData));\r\n    dispatch(isLoggedAction(jsonUserData));\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      {isLogged === true && <Redirect push to=\"/dashboard\" />}\r\n      <Header>\r\n        Dead<span>l</span>ine\r\n      </Header>\r\n      <Container>\r\n        <FormBox onSubmit={sendForm}>\r\n          <EmailInput type=\"text\" minLength=\"2\" placeholder=\"User Name...\" />\r\n          <PasswordInput\r\n            type=\"password\"\r\n            minLength=\"4\"\r\n            placeholder=\"Password...\"\r\n          />\r\n          <LoginButton type=\"submit\">Log In</LoginButton>\r\n          <SignUpButton>\r\n            <StyledLink to=\"/signup\">Sign Up</StyledLink>\r\n          </SignUpButton>\r\n          <GuestButton onClick={loginAsGuest}>Log as Global Guest</GuestButton>\r\n        </FormBox>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  color: ${c.darkText};\r\n`;\r\n\r\nconst Header = styled.div`\r\n  flex-basis: 10%;\r\n  font-size: 4rem;\r\n  font-family: \"Titillium Web\", sans-serif;\r\n  color: ${c.darkBlueText};\r\n  span {\r\n    color: red;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  ${flexbox()};\r\n  ${borderShadowsRadius};\r\n  flex-basis: 65%;\r\n  width: 80%;\r\n\r\n  background: ${c.bgShyBlue};\r\n  padding: 20px;\r\n\r\n  max-height: 375px;\r\n  max-width: 400px;\r\n\r\n  font-family: \"Montserrat\", sans-serif;\r\n`;\r\n\r\nconst FormBox = styled.form`\r\n  ${flexbox({ dir: \"column\", jc: \"space-around\" })};\r\n\r\n  width: 90%;\r\n  height: 100%;\r\n`;\r\n\r\nconst EmailInput = styled.input`\r\n  box-shadow: ${c.inputShadows};\r\n  background: ${c.inputShyBlue};\r\n  color: ${c.darkBlueText};\r\n  width: 100%;\r\n  height: 15%;\r\n  border-radius: 5px;\r\n  border: none;\r\n  padding-left: 10px;\r\n  font-size: 0.8rem;\r\n\r\n  opacity: 0.7;\r\n  transition: 0.3s ease-out;\r\n\r\n  outline: none;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    opacity: 1;\r\n  }\r\n`;\r\nconst PasswordInput = styled(EmailInput)`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst LoginButton = styled.button`\r\n  ${buttonStyle}\r\n\r\n  background: ${c.elmShyBlue};\r\n  color: ${c.darkBlueText};\r\n  &:hover,\r\n  &:focus {\r\n    opacity: 0.9;\r\n    cursor: pointer;\r\n    background: ${c.elmLightBlue};\r\n  }\r\n`;\r\n\r\nconst SignUpButton = styled(LoginButton)``;\r\nconst GuestButton = styled(LoginButton)``;\r\n\r\nconst StyledLink = styled(Link)`\r\n  ${flexbox()};\r\n  height: 100%;\r\n  width: 100%;\r\n  text-decoration: none;\r\n  color: inherit;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}